#!/bin/sh

MAX_ITERATIONS=30
SLEEP_TIME=0.5

if command -v streamdeck; then
  if ! pgrep -x "streamdeck" > /dev/null; then
    nohup streamdeck &
  fi
  # streamdeck & sleep 2 && xdotool search --class "Streamdeck UI" windowminimize

  i=0
  while [ $i -lt $MAX_ITERATIONS ]; do
    if pgrep -x "streamdeck" > /dev/null; then
      xdotool search --class "Streamdeck UI" windowminimize
      break
    else
      sleep $SLEEP_TIME
    fi
    i=$((i+1))
  done
else
  notify-send "streamdeck is NOT installed"
fi

exit 0

# vim: set ft=sh:
